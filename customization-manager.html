<!DOCTYPE html>
<html>
<head>
    <title>GoEye Customization Manager</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px;
        }
        .section { 
            margin: 20px 0; 
            padding: 20px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            background: #f9f9f9;
        }
        .form-group { 
            margin: 15px 0; 
        }
        label { 
            display: block; 
            margin-bottom: 5px; 
            font-weight: bold; 
        }
        input[type="text"], input[type="color"], textarea { 
            width: 100%; 
            padding: 8px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            box-sizing: border-box;
        }
        button { 
            padding: 10px 20px; 
            margin: 5px; 
            background: #007bff; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        button:hover { 
            background: #0056b3; 
        }
        .success { 
            background: #d4edda; 
            color: #155724; 
            padding: 10px; 
            border-radius: 4px; 
            margin: 10px 0;
        }
        .error { 
            background: #f8d7da; 
            color: #721c24; 
            padding: 10px; 
            border-radius: 4px; 
            margin: 10px 0;
        }
        .preview { 
            margin: 10px 0; 
            padding: 15px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            background: white;
        }
        .collection-item, .category-item { 
            margin: 10px 0; 
            padding: 10px; 
            border: 1px solid #ddd; 
            border-radius: 4px; 
            background: white;
        }
        .add-item { 
            background: #28a745; 
        }
        .remove-item { 
            background: #dc3545; 
        }
    </style>
</head>
<body>
    <h1>ðŸŽ¨ GoEye Customization Manager</h1>
    <p>Update your app's customization data. Changes will sync to your mobile APK within 5 seconds.</p>
    
    <div id="status" style="display: none;"></div>
    
    <div class="section">
        <h2>Header Customization</h2>
        <div class="form-group">
            <label>Logo URL:</label>
            <input type="text" id="logoUrl" placeholder="Enter logo image URL">
        </div>
        <div class="form-group">
            <label>Background Color:</label>
            <input type="color" id="backgroundColor" value="#1a1a1a">
        </div>
        <div class="form-group">
            <label>Text Color:</label>
            <input type="color" id="textColor" value="#ffffff">
        </div>
        <div class="form-group">
            <label>
                <input type="checkbox" id="showPromotionalBanner" checked> Show Promotional Banner
            </label>
        </div>
        <div class="form-group">
            <label>Banner Text:</label>
            <input type="text" id="promotionalBannerText" value="ðŸŽ‰ Free Lens with Every Frame! Limited Time Offer">
        </div>
        <div class="form-group">
            <label>Banner Background Color:</label>
            <input type="color" id="promotionalBannerBackgroundColor" value="#FF6B6B">
        </div>
        <div class="form-group">
            <label>Banner Text Color:</label>
            <input type="color" id="promotionalBannerTextColor" value="#ffffff">
        </div>
    </div>

    <div class="section">
        <h2>Collections to Explore</h2>
        <div id="collections-container"></div>
        <button class="add-item" onclick="addCollection()">+ Add Collection</button>
    </div>

    <div class="section">
        <h2>Eyeglasses Categories</h2>
        <div id="eyeglasses-container"></div>
        <button class="add-item" onclick="addEyeglassesCategory()">+ Add Category</button>
    </div>

    <div class="section">
        <h2>Sunglasses Categories</h2>
        <div id="sunglasses-container"></div>
        <button class="add-item" onclick="addSunglassesCategory()">+ Add Category</button>
    </div>

    <div class="section">
        <button onclick="loadCurrentData()">Load Current Data</button>
        <button onclick="saveData()" style="background: #28a745;">Save Changes</button>
        <button onclick="previewData()">Preview Data</button>
    </div>

    <div id="preview" class="section" style="display: none;">
        <h2>Data Preview</h2>
        <pre id="preview-content"></pre>
    </div>

    <script>
        let currentData = {
            headerCustomization: {
                logoUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=200&h=60&fit=crop",
                backgroundColor: "#1a1a1a",
                textColor: "#ffffff",
                showPromotionalBanner: true,
                promotionalBannerText: "ðŸŽ‰ Free Lens with Every Frame! Limited Time Offer",
                promotionalBannerBackgroundColor: "#FF6B6B",
                promotionalBannerTextColor: "#ffffff"
            },
            collections: [],
            eyeglassesCategories: [],
            sunglassesCategories: [],
            lastUpdated: new Date().toISOString()
        };

        function showStatus(message, isError = false) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = isError ? 'error' : 'success';
            statusDiv.style.display = 'block';
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }

        function loadCurrentData() {
            fetch('/public/customization-data.json')
                .then(response => response.json())
                .then(data => {
                    currentData = data;
                    populateForm();
                    showStatus('Current data loaded successfully');
                })
                .catch(error => {
                    showStatus('Error loading current data: ' + error.message, true);
                });
        }

        function populateForm() {
            // Header customization
            document.getElementById('logoUrl').value = currentData.headerCustomization.logoUrl || '';
            document.getElementById('backgroundColor').value = currentData.headerCustomization.backgroundColor || '#1a1a1a';
            document.getElementById('textColor').value = currentData.headerCustomization.textColor || '#ffffff';
            document.getElementById('showPromotionalBanner').checked = currentData.headerCustomization.showPromotionalBanner || false;
            document.getElementById('promotionalBannerText').value = currentData.headerCustomization.promotionalBannerText || '';
            document.getElementById('promotionalBannerBackgroundColor').value = currentData.headerCustomization.promotionalBannerBackgroundColor || '#FF6B6B';
            document.getElementById('promotionalBannerTextColor').value = currentData.headerCustomization.promotionalBannerTextColor || '#ffffff';

            // Render collections and categories
            renderCollections();
            renderEyeglassesCategories();
            renderSunglassesCategories();
        }

        function renderCollections() {
            const container = document.getElementById('collections-container');
            container.innerHTML = '';
            
            currentData.collections.forEach((collection, index) => {
                const item = document.createElement('div');
                item.className = 'collection-item';
                item.innerHTML = `
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" value="${collection.title}" onchange="currentData.collections[${index}].title = this.value">
                    </div>
                    <div class="form-group">
                        <label>Image URL:</label>
                        <input type="text" value="${collection.imageUrl}" onchange="currentData.collections[${index}].imageUrl = this.value">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" ${collection.isVisible ? 'checked' : ''} onchange="currentData.collections[${index}].isVisible = this.checked"> Visible
                        </label>
                    </div>
                    <button class="remove-item" onclick="removeCollection(${index})">Remove</button>
                `;
                container.appendChild(item);
            });
        }

        function renderEyeglassesCategories() {
            const container = document.getElementById('eyeglasses-container');
            container.innerHTML = '';
            
            currentData.eyeglassesCategories.forEach((category, index) => {
                const item = document.createElement('div');
                item.className = 'category-item';
                item.innerHTML = `
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" value="${category.title}" onchange="currentData.eyeglassesCategories[${index}].title = this.value">
                    </div>
                    <div class="form-group">
                        <label>Image URL:</label>
                        <input type="text" value="${category.imageUrl}" onchange="currentData.eyeglassesCategories[${index}].imageUrl = this.value">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" ${category.isVisible ? 'checked' : ''} onchange="currentData.eyeglassesCategories[${index}].isVisible = this.checked"> Visible
                        </label>
                    </div>
                    <button class="remove-item" onclick="removeEyeglassesCategory(${index})">Remove</button>
                `;
                container.appendChild(item);
            });
        }

        function renderSunglassesCategories() {
            const container = document.getElementById('sunglasses-container');
            container.innerHTML = '';
            
            currentData.sunglassesCategories.forEach((category, index) => {
                const item = document.createElement('div');
                item.className = 'category-item';
                item.innerHTML = `
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" value="${category.title}" onchange="currentData.sunglassesCategories[${index}].title = this.value">
                    </div>
                    <div class="form-group">
                        <label>Image URL:</label>
                        <input type="text" value="${category.imageUrl}" onchange="currentData.sunglassesCategories[${index}].imageUrl = this.value">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" ${category.isVisible ? 'checked' : ''} onchange="currentData.sunglassesCategories[${index}].isVisible = this.checked"> Visible
                        </label>
                    </div>
                    <button class="remove-item" onclick="removeSunglassesCategory(${index})">Remove</button>
                `;
                container.appendChild(item);
            });
        }

        function addCollection() {
            currentData.collections.push({
                id: Date.now().toString(),
                title: "New Collection",
                imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop",
                isVisible: true
            });
            renderCollections();
        }

        function addEyeglassesCategory() {
            currentData.eyeglassesCategories.push({
                id: Date.now().toString(),
                title: "New Category",
                imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=120&h=120&fit=crop",
                isVisible: true
            });
            renderEyeglassesCategories();
        }

        function addSunglassesCategory() {
            currentData.sunglassesCategories.push({
                id: Date.now().toString(),
                title: "New Category",
                imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=120&h=120&fit=crop",
                isVisible: true
            });
            renderSunglassesCategories();
        }

        function removeCollection(index) {
            currentData.collections.splice(index, 1);
            renderCollections();
        }

        function removeEyeglassesCategory(index) {
            currentData.eyeglassesCategories.splice(index, 1);
            renderEyeglassesCategories();
        }

        function removeSunglassesCategory(index) {
            currentData.sunglassesCategories.splice(index, 1);
            renderSunglassesCategories();
        }

        function saveData() {
            // Update current data from form
            currentData.headerCustomization.logoUrl = document.getElementById('logoUrl').value;
            currentData.headerCustomization.backgroundColor = document.getElementById('backgroundColor').value;
            currentData.headerCustomization.textColor = document.getElementById('textColor').value;
            currentData.headerCustomization.showPromotionalBanner = document.getElementById('showPromotionalBanner').checked;
            currentData.headerCustomization.promotionalBannerText = document.getElementById('promotionalBannerText').value;
            currentData.headerCustomization.promotionalBannerBackgroundColor = document.getElementById('promotionalBannerBackgroundColor').value;
            currentData.headerCustomization.promotionalBannerTextColor = document.getElementById('promotionalBannerTextColor').value;
            
            currentData.lastUpdated = new Date().toISOString();

            // Save to localStorage for now (in a real app, this would save to the server)
            localStorage.setItem('goeye_customization_data', JSON.stringify(currentData));
            showStatus('Data saved to browser storage. Note: This is a demo - in production this would save to your server.');
        }

        function previewData() {
            const previewDiv = document.getElementById('preview');
            const previewContent = document.getElementById('preview-content');
            previewContent.textContent = JSON.stringify(currentData, null, 2);
            previewDiv.style.display = 'block';
        }

        // Load data on page load
        window.onload = function() {
            loadCurrentData();
        };
    </script>
</body>
</html>
